<!doctype html>
<html lang="zh-CN">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>课表解析调试</title>
<link rel="stylesheet" href="style.css">
</head>
<body>
    <div style="padding:20px; max-width:900px; margin:0 auto;">
        <h2>解析调试</h2>
        <p>在下方粘贴 Excel 行（制表符或逗号分隔），然后点击 <strong>解析</strong> 查看 parseTimeString 结果和最终课程对象示例。</p>
        <textarea id="debug-input" rows="10" style="width:100%; font-family: monospace;"></textarea>
        <div style="margin-top:8px; display:flex; gap:8px;">
            <button id="debug-parse" class="btn btn-primary">解析</button>
            <button id="debug-clear" class="btn btn-secondary">清除</button>
        </div>
        <h3>结果</h3>
        <pre id="debug-output" style="background:#f8f9fa; padding:12px; border-radius:6px; max-height:400px; overflow:auto;"></pre>
    </div>

<script src="app.js"></script>
<script>
document.getElementById('debug-parse').addEventListener('click', () => {
    const raw = document.getElementById('debug-input').value.trim();
    const lines = raw.split(/\n+/).map(l => l.trim()).filter(Boolean);
    const out = [];
    lines.forEach(line => {
        // 尝试按制表或空格或逗号分割为字段
        const parts = line.split(/\t|\s{2,}|,|，/).map(p => p.trim()).filter(Boolean);
        const [name, classId, time, location, teacher] = parts;
        const parsed = parseTimeString(time || '');
        out.push({raw: line, parts, parsed, course: {name, classId, time, location, teacher}});
    });
    document.getElementById('debug-output').textContent = JSON.stringify(out, null, 2);
});

document.getElementById('debug-clear').addEventListener('click', ()=>{
    document.getElementById('debug-input').value='';
    document.getElementById('debug-output').textContent='';
});
</script>
</body>
</html>
